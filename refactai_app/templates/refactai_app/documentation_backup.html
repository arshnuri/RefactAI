{% extends 'refactai_app/base.html' %}

{% block title %}RefactAI Documentation - Setup Guide{% endblock %}

{% block content %}
<div class="badge">📚 Documentation</div>
<h1 class="neon-text" style="font-size: 2.5rem; margin-bottom: 30px;">RefactAI Setup Guide</h1>
<p style="font-size: 1.2rem; color: #D1D5DB; margin-bottom: 20px;">Complete guide to set up RefactAI with CLI and Git Hook integration</p>

<!-- What's New Section -->
<div class="alert" style="background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); color: #A855F7; padding: 20px; border-radius: 12px; margin: 20px 0;">
    <h3 style="margin: 0 0 15px 0; color: #A855F7;">🆕 What's New in RefactAI</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
        <div>✨ <strong>Interactive CLI Mode</strong> - Menu-driven interface</div>
        <div>🚀 <strong>Refactor & Push to Git</strong> - One-click workflow</div>
        <div>🌐 <strong>Cross-Drive Support</strong> - Files from any drive</div>
        <div>🔧 <strong>Unicode Fixes</strong> - Resolved Windows encoding</div>
        <div>🤖 <strong>OpenRouter Integration</strong> - Enhanced API support</div>
        <div>🛠️ <strong>Automated Fix Scripts</strong> - Self-healing setup</div>
    </div>
</div>

<!-- iOS-style Toggle Switch -->
<div class="toggle-container">
    <div class="toggle-switch" onclick="toggleSection()">
        <div class="toggle-slider" id="toggleSlider"></div>
        <div class="toggle-option" data-section="cli">
            <span class="toggle-text">CLI Setup</span>
        </div>
        <div class="toggle-option" data-section="git">
            <span class="toggle-text">Git Hook Setup</span>
        </div>
    </div>
</div>

<!-- CLI Section -->
<div id="cliSection" class="documentation-section">
    <div class="card">
        <div class="card-title">🖥️ CLI Setup & Usage</div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Prerequisites</h3>
        <ul style="color: #D1D5DB; margin-bottom: 25px; line-height: 1.6;">
            <li>Python 3.10 or higher</li>
            <li>Git repository (for version control)</li>
            <li>Local LLM (Ollama recommended) or API key</li>
        </ul>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 1: Clone Repository</h3>
        <div class="code-block">
            <code>git clone https://github.com/yourusername/RefactAI.git<br>
cd RefactAI</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 2: Environment Setup</h3>
        
        <h4 style="color: #34D399; margin: 20px 0 15px 0;">🚀 Automated Setup (Recommended)</h4>
        <div class="code-block">
            <code># For new users (sets up everything)<br>
python setup.py<br><br>
# For existing users (adds new features)<br>
python fix_cli_validation.py<br>
python fix_ast_validator.py<br><br>
# Traditional setup<br>
python setup_local_llm.py</code>
        </div>
        
        <h4 style="color: #34D399; margin: 25px 0 15px 0;">📋 Manual Setup</h4>
        <div class="code-block">
            <code># Create virtual environment<br>
python -m venv venv<br><br>
# Windows<br>
venv\Scripts\activate<br><br>
# macOS/Linux<br>
source venv/bin/activate<br><br>
# Install dependencies<br>
pip install -r requirements.txt</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 3: Choose Your LLM Method</h3>
        
        <!-- LLM Method Cards -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
            <div class="llm-method-card recommended">
                <div class="method-header">
                    <span class="method-icon">🏠</span>
                    <div>
                        <h4>Local LLM (Recommended)</h4>
                        <span class="method-badge">Free & Private</span>
                    </div>
                </div>
                <div class="method-features">
                    <div class="feature">✅ No API costs</div>
                    <div class="feature">✅ Complete privacy</div>
                    <div class="feature">✅ Offline capability</div>
                    <div class="feature">⚠️ Requires 8GB+ RAM</div>
                </div>
            </div>
            
            <div class="llm-method-card">
                <div class="method-header">
                    <span class="method-icon">☁️</span>
                    <div>
                        <h4>Cloud API</h4>
                        <span class="method-badge">Fast & Powerful</span>
                    </div>
                </div>
                <div class="method-features">
                    <div class="feature">✅ High performance</div>
                    <div class="feature">✅ No local resources</div>
                    <div class="feature">✅ Latest models</div>
                    <div class="feature">⚠️ Requires API key</div>
                </div>
            </div>
            
            <div class="llm-method-card">
                <div class="method-header">
                    <span class="method-icon">🔄</span>
                    <div>
                        <h4>Hybrid Mode</h4>
                        <span class="method-badge">Best of Both</span>
                    </div>
                </div>
                <div class="method-features">
                    <div class="feature">✅ Auto fallback</div>
                    <div class="feature">✅ Cost optimization</div>
                    <div class="feature">✅ Reliability</div>
                    <div class="feature">✅ Smart routing</div>
                </div>
            </div>
        </div>
        
        <h4 style="color: #A78BFA; margin: 25px 0 15px 0;">🏠 Local LLM Setup</h4>
        <div class="code-block">
            <code># Automated setup (recommended)<br>
python setup_local_llm.py<br><br>
# Manual setup:<br>
# 1. Install Ollama from https://ollama.ai/<br>
ollama pull deepseek-coder:6.7b<br>
# or for lighter systems:<br>
ollama pull qwen2.5-coder:1.5b<br><br>
# 2. Set environment variables<br>
echo "PREFER_LOCAL_LLM=true" > .env<br>
echo "LOCAL_LLM_MODEL=deepseek-coder:6.7b" >> .env</code>
        </div>
        
        <h4 style="color: #A78BFA; margin: 25px 0 15px 0;">☁️ OpenRouter API Setup (Recommended)</h4>
        <div class="alert" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); color: #22C55E; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <strong>🎯 Recommended:</strong> OpenRouter provides access to multiple AI models with excellent performance and reliability.
        </div>
        <div class="code-block">
            <code># 1. Get API key from https://openrouter.ai/<br>
# 2. Configure environment<br>
echo "OPENROUTER_API_KEY=your_key_here" > .env<br>
echo "OPENROUTER_API_URL=https://openrouter.ai/api/v1/chat/completions" >> .env<br>
echo "DEFAULT_MODEL=anthropic/claude-3.5-sonnet" >> .env<br>
echo "PREFER_LOCAL_LLM=false" >> .env<br><br>
# 3. Test the connection<br>
python test_openrouter_api.py<br><br>
# Available models:<br>
# - anthropic/claude-3.5-sonnet (Recommended)<br>
# - openai/gpt-4o<br>
# - deepseek/deepseek-coder<br>
# - google/gemini-pro-1.5</code>
        </div>
        
        <h4 style="color: #A78BFA; margin: 25px 0 15px 0;">🔗 Alternative APIs</h4>
        <div class="code-block">
            <code># Groq (Fast inference)<br>
echo "GROQ_API_KEY=your_key_here" >> .env<br>
echo "USE_GROQ=true" >> .env<br><br>
# Google Gemini<br>
echo "GEMINI_API_KEY=your_key_here" >> .env<br>
echo "USE_GEMINI=true" >> .env<br><br>
# Test connections<br>
python test_groq_api.py<br>
python test_gemini_api.py</code>
        </div>
        
        <h4 style="color: #A78BFA; margin: 25px 0 15px 0;">🔄 Hybrid Mode Setup</h4>
        <div class="code-block">
            <code># Enable hybrid mode (local + API fallback)<br>
echo "PREFER_LOCAL_LLM=true" > .env<br>
echo "LOCAL_LLM_MODEL=deepseek-coder:6.7b" >> .env<br>
echo "OPENROUTER_API_KEY=your_backup_key" >> .env<br>
echo "ENABLE_HYBRID_MODE=true" >> .env<br><br>
# System will use local LLM first, fallback to API if needed</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 4: CLI Usage</h3>
        
        <h4 style="color: #34D399; margin: 20px 0 15px 0;">🎯 Interactive Mode (Recommended)</h4>
        <div class="code-block">
            <code># Launch interactive CLI menu<br>
python cli.py<br><br>
# Available options:<br>
# 🔄 Refactor a single file<br>
# 📁 Refactor a directory<br>
# 🚀 Refactor and Push to Git (NEW!)<br>
# ⚙️  Configure settings<br>
# 🧪 Test LLM connection<br>
# 📊 View refactoring statistics</code>
        </div>
        
        <h4 style="color: #34D399; margin: 25px 0 15px 0;">🚀 New: "Refactor and Push to Git" Feature</h4>
        <div class="alert" style="background: rgba(52, 211, 153, 0.1); border: 1px solid rgba(52, 211, 153, 0.3); color: #34D399; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <strong>🆕 Latest Update:</strong> New integrated workflow that refactors your code and pushes to Git in one seamless operation!
        </div>
        
        <div class="feature-grid" style="margin: 20px 0;">
            <div class="feature-item">
                <div class="feature-icon">📁</div>
                <div class="feature-text">
                    <strong>Smart File Selection</strong><br>
                    Choose from modified files, patterns, or manual selection
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">🔄</div>
                <div class="feature-text">
                    <strong>AI Refactoring</strong><br>
                    Uses OpenRouter API with AST validation
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">🌐</div>
                <div class="feature-text">
                    <strong>Cross-Drive Support</strong><br>
                    Works with files from different drives (D:\, C:\, etc.)
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">🔗</div>
                <div class="feature-text">
                    <strong>Git Integration</strong><br>
                    Automatic staging, commit, and push
                </div>
            </div>
        </div>
        
        <h5 style="color: #A78BFA; margin: 20px 0 10px 0;">File Selection Methods:</h5>
        <div class="code-block">
            <code># 1. All modified files (from git status)<br>
Select: "📁 All modified files"<br><br>
# 2. Pattern-based selection<br>
Select: "🎯 Specific files by pattern"<br>
Examples:<br>
  - *.py (all Python files)<br>
  - src/**/*.js (all JS files in src/)<br>
  - **/*.java (all Java files)<br><br>
# 3. Manual file selection<br>
Select: "📝 Manual file selection"<br>
Examples:<br>
  - D:\MyProject\app.py<br>
  - C:\Code\utils.js, D:\Backend\api.java<br>
  - /absolute/path/to/file.py</code>
        </div>
        
        <h4 style="color: #34D399; margin: 25px 0 15px 0;">⚡ Command Line Options</h4>
        <div class="code-block">
            <code># Traditional command-line usage<br>
python cli.py path/to/your/file.py<br><br>
# Dry run (preview changes)<br>
python cli.py --dry-run path/to/your/file.py<br><br>
# Refactor directory<br>
python cli.py --recursive src/<br><br>
# Use specific model<br>
python cli.py --model codellama:7b path/to/your/file.py<br><br>
# Create backup<br>
python cli.py --backup path/to/your/file.py<br><br>
# Test connection<br>
python cli.py --test-connection</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Supported Languages</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 20px;">
            <span class="language-tag">🐍 Python</span>
            <span class="language-tag">📜 JavaScript</span>
            <span class="language-tag">☕ Java</span>
            <span class="language-tag">⚡ C++</span>
        </div>
    </div>
</div>

<!-- Git Hook Section -->
<div id="gitSection" class="documentation-section" style="display: none;">
    <div class="card">
        <div class="card-title">🔗 Git Hook Setup & Integration</div>
        
        <div class="alert" style="background: rgba(52, 211, 153, 0.1); border: 1px solid rgba(52, 211, 153, 0.3); color: #34D399; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <strong>🆕 Recently Updated:</strong> Git hooks have been enhanced with Unicode fixes and better error handling for Windows environments!
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Prerequisites</h3>
        <ul style="color: #D1D5DB; margin-bottom: 25px; line-height: 1.6;">
            <li>RefactAI CLI already set up</li>
            <li>Git repository initialized</li>
            <li>OpenRouter API key configured (recommended)</li>
            <li>Python environment properly configured</li>
        </ul>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 1: Automated Setup (Recommended)</h3>
        <div class="code-block">
            <code># Use the enhanced setup script<br>
python setup_local_llm.py<br><br>
# Or use the new user setup script<br>
python setup.py<br><br>
# This will:<br>
# ✅ Install dependencies<br>
# ✅ Configure environment variables<br>
# ✅ Set up Git hooks with Unicode fixes<br>
# ✅ Test the configuration</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 2: Manual Installation</h3>
        <div class="code-block">
            <code># Copy the enhanced hook (with Unicode fixes)<br>
cp git-hook-ascii.py .git/hooks/pre-push<br><br>
# Or use the minimal version<br>
cp git-hook-minimal.py .git/hooks/pre-push<br><br>
# Make executable (Unix/macOS only)<br>
chmod +x .git/hooks/pre-push<br><br>
# Windows: No chmod needed, but ensure Python is in PATH</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 3: Verify Installation</h3>
        <div class="code-block">
            <code># Check if hook exists<br>
ls -la .git/hooks/pre-push<br><br>
# Test the hook without pushing<br>
git add .<br>
git commit -m "Test commit"<br>
git push --dry-run<br><br>
# If issues occur, bypass with:<br>
git push --no-verify</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Step 4: Normal Usage</h3>
        <div class="code-block">
            <code># Regular Git workflow with automatic refactoring<br>
git add .<br>
git commit -m "Your changes"<br>
git push  # ✨ Automatic refactoring happens here!<br><br>
# The hook will:<br>
# 1. 🔍 Detect modified code files<br>
# 2. 🔄 Refactor them using AI<br>
# 3. ✅ Validate syntax with AST<br>
# 4. 💾 Create backups<br>
# 5. 🚀 Push the improved code</code>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Enhanced Hook Features</h3>
        <div class="feature-grid">
            <div class="feature-item">
                <div class="feature-icon">�</div>
                <div class="feature-text">
                    <strong>Unicode Fixed</strong><br>
                    Resolved encoding issues on Windows
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">🛡️</div>
                <div class="feature-text">
                    <strong>Error Handling</strong><br>
                    Better error messages and recovery
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">⚡</div>
                <div class="feature-text">
                    <strong>Lightweight</strong><br>
                    Minimal dependencies, faster execution
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">🔄</div>
                <div class="feature-text">
                    <strong>AST Validation</strong><br>
                    Ensures syntactically correct code
                </div>
            </div>
        </div>
        
        <h3 style="color: #A78BFA; margin-bottom: 15px;">Advanced Options</h3>
        <div class="code-block">
            <code># Skip refactoring for specific push<br>
git push --no-verify<br><br>
# Temporary disable hook<br>
mv .git/hooks/pre-push .git/hooks/pre-push.disabled<br><br>
# Re-enable hook<br>
mv .git/hooks/pre-push.disabled .git/hooks/pre-push<br><br>
# Update hook with latest fixes<br>
python fix_cli_validation.py<br>
python fix_ast_validator.py</code>
        </div>
    </div>
</div>

<!-- Troubleshooting Section -->
<div class="card" style="margin-top: 30px;">
    <div class="card-title">🔧 Troubleshooting & Fixes</div>
    
    <div class="alert" style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); color: #FBBF24; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <strong>🚨 Common Issues Fixed:</strong> If you're experiencing validation errors or Git hook problems, we have automated fix scripts available!
    </div>
    
    <div class="troubleshooting-grid">
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">🐛 CLI Validation Errors</h4>
            <div class="code-block" style="margin: 10px 0; font-size: 0.9em;">
                <code># Fix: 'InteractiveRefactorCLI' object has no attribute...<br>
python fix_cli_validation.py<br><br>
# Fix: 'ASTValidator' object has no attribute 'validate_syntax'<br>
python fix_ast_validator.py</code>
            </div>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>✅ Automated fix scripts available</li>
                <li>✅ Resolves method name mismatches</li>
                <li>✅ Adds missing AST validation methods</li>
            </ul>
        </div>
        
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">🔗 Git Hook Issues</h4>
            <div class="code-block" style="margin: 10px 0; font-size: 0.9em;">
                <code># Unicode encoding errors (Windows)<br>
cp git-hook-ascii.py .git/hooks/pre-push<br><br>
# Make executable (Unix/Linux/macOS)<br>
chmod +x .git/hooks/pre-push<br><br>
# Bypass hook temporarily<br>
git push --no-verify</code>
            </div>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>✅ Fixed Unicode issues on Windows</li>
                <li>✅ Simplified hook with minimal dependencies</li>
                <li>✅ Better error handling and recovery</li>
            </ul>
        </div>
        
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">🌐 Cross-Drive File Access</h4>
            <div class="code-block" style="margin: 10px 0; font-size: 0.9em;">
                <code># Use absolute paths<br>
D:\MyProject\app.py<br>
C:\Code\utils.js<br><br>
# Multiple files from different drives<br>
D:\Backend\api.py, C:\Frontend\app.js</code>
            </div>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>✅ Full cross-drive support added</li>
                <li>✅ Handles Windows drive letters properly</li>
                <li>✅ Works in CLI "Refactor and Push" mode</li>
            </ul>
        </div>
        
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">🔑 API Configuration</h4>
            <div class="code-block" style="margin: 10px 0; font-size: 0.9em;">
                <code># OpenRouter API (Recommended)<br>
echo "OPENROUTER_API_KEY=your_key" > .env<br><br>
# Test connection<br>
python test_openrouter_api.py<br><br>
# Alternative APIs<br>
python test_groq_api.py<br>
python test_gemini_api.py</code>
            </div>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>✅ OpenRouter integration enhanced</li>
                <li>✅ Multiple API provider support</li>
                <li>✅ Automatic fallback mechanisms</li>
            </ul>
        </div>
        
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">⚡ Performance Issues</h4>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>Use OpenRouter API for faster processing</li>
                <li>Process smaller file batches</li>
                <li>Enable dry-run mode for testing</li>
                <li>Check network connection for API calls</li>
            </ul>
        </div>
        
        <div class="trouble-item">
            <h4 style="color: #F87171; margin-bottom: 10px;">🏠 Local LLM Issues</h4>
            <div class="code-block" style="margin: 10px 0; font-size: 0.9em;">
                <code># Check Ollama status<br>
ollama --version<br>
ollama list<br>
ollama serve<br><br>
# Pull recommended models<br>
ollama pull deepseek-coder:6.7b<br>
ollama pull qwen2.5-coder:1.5b</code>
            </div>
            <ul style="color: #D1D5DB; line-height: 1.6; font-size: 0.9em;">
                <li>✅ Hybrid mode available (local + API)</li>
                <li>✅ Automatic fallback to API if local fails</li>
                <li>✅ Multiple model size options</li>
            </ul>
        </div>
    </div>
    
    <div style="margin-top: 30px; padding: 20px; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px;">
        <h4 style="color: #3B82F6; margin-bottom: 15px;">📚 Additional Resources</h4>
        <ul style="color: #D1D5DB; line-height: 1.8;">
            <li><strong>SETUP_GUIDE_FOR_USERS.md</strong> - Comprehensive setup guide</li>
            <li><strong>NEW_USER_SETUP.md</strong> - Quick start for new users</li>
            <li><strong>TROUBLESHOOTING.md</strong> - Detailed troubleshooting guide</li>
            <li><strong>setup.py</strong> - Automated environment setup script</li>
        </ul>
    </div>
</div>
</div>

<style>
/* Glassmorphism Design */
.documentation-section {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

.card {
    background: rgba(255, 255, 255, 0.05) !important;
    backdrop-filter: blur(25px) !important;
    -webkit-backdrop-filter: blur(25px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 
                inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
    border-radius: 20px !important;
    position: relative;
    overflow: hidden;
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(167, 139, 250, 0.5), transparent);
    animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

.card-title {
    background: linear-gradient(135deg, #A78BFA, #8B5CF6, #7C3AED) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    font-weight: 700 !important;
    text-shadow: 0 0 30px rgba(167, 139, 250, 0.3);
    position: relative;
}

.code-block {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 18px;
    padding: 28px;
    margin: 24px 0;
    border: 1px solid rgba(255, 255, 255, 0.12);
    overflow-x: auto;
    position: relative;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.code-block:hover {
    border-color: rgba(34, 197, 94, 0.4);
    box-shadow: 0 16px 48px rgba(34, 197, 94, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.code-block:hover::before {
    opacity: 1;
}

.code-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.05) 0%, 
        rgba(16, 185, 129, 0.05) 50%, 
        rgba(5, 150, 105, 0.05) 100%);
    border-radius: 18px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.code-block code {
    color: #F8FAFC;
    font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
    font-size: 1.1rem;
    line-height: 1.8;
    white-space: pre;
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    filter: drop-shadow(0 0 8px rgba(34, 197, 94, 0.2));
    font-weight: 500;
    letter-spacing: 0.025em;
}

.language-tag {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: #E0E7FF;
            padding: 12px 18px;
            border-radius: 25px;
            font-size: 0.9rem;
            border: 1px solid rgba(167, 139, 250, 0.3);
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 32px rgba(167, 139, 250, 0.1);
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .language-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(167, 139, 250, 0.05) 0%, 
                rgba(139, 92, 246, 0.05) 50%,
                rgba(124, 58, 237, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .language-tag:hover {
            box-shadow: 0 16px 48px rgba(167, 139, 250, 0.2);
            border-color: rgba(167, 139, 250, 0.5);
        }

        .language-tag:hover::before {
            opacity: 1;
        }

.feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin: 25px 0;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 24px;
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 18px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            will-change: transform;
        }

        .feature-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(167, 139, 250, 0.05) 0%, 
                rgba(139, 92, 246, 0.05) 50%,
                rgba(124, 58, 237, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-item:hover {
            border-color: rgba(167, 139, 250, 0.4);
            box-shadow: 0 16px 48px rgba(167, 139, 250, 0.15);
        }

        .feature-item:hover::before {
            opacity: 1;
        }

.feature-icon {
    font-size: 1.8rem;
    min-width: 45px;
    filter: drop-shadow(0 0 10px rgba(167, 139, 250, 0.3));
    position: relative;
    z-index: 1;
}

.feature-text {
    color: #E5E7EB;
    line-height: 1.5;
    position: relative;
    z-index: 1;
}

.feature-text strong {
    color: #F3F4F6;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.troubleshooting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 28px;
            margin: 25px 0;
        }

        .trouble-item {
            padding: 24px;
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 18px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            will-change: transform;
        }

        .trouble-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(248, 113, 113, 0.05) 0%, 
                rgba(239, 68, 68, 0.05) 50%,
                rgba(220, 38, 38, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .trouble-item:hover {
            border-color: rgba(248, 113, 113, 0.4);
            box-shadow: 0 16px 48px rgba(248, 113, 113, 0.15);
        }

        .trouble-item:hover::before {
            opacity: 1;
        }

.trouble-item h4 {
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.trouble-item ul {
    position: relative;
    z-index: 1;
}

.trouble-item code {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.85rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #F3F4F6;
    font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
}

/* Toggle Buttons Enhancement */
.btn {
    backdrop-filter: blur(15px) !important;
    -webkit-backdrop-filter: blur(15px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    position: relative !important;
    overflow: hidden !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1) !important;
    will-change: transform !important;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s ease;
}

.btn:hover::before {
    left: 100%;
}

.btn:hover {
    box-shadow: 0 8px 25px rgba(139, 92, 246, 0.2) !important;
}

/* Responsive Design */
@media (max-width: 768px) {
    .feature-grid {
        grid-template-columns: 1fr;
    }
    
    .troubleshooting-grid {
        grid-template-columns: 1fr;
    }
    
    .code-block {
        padding: 20px;
        margin: 18px 0;
        border-radius: 16px;
    }
    
    .code-block code {
        font-size: 1rem;
        line-height: 1.7;
    }
    
    .feature-item, .trouble-item {
        padding: 16px;
    }
}

/* Scrollbar Styling */
.code-block::-webkit-scrollbar {
    height: 8px;
}

.code-block::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.code-block::-webkit-scrollbar-thumb {
    background: rgba(34, 197, 94, 0.3);
    border-radius: 4px;
    transition: background 0.3s ease;
}

.code-block::-webkit-scrollbar-thumb:hover {
    background: rgba(34, 197, 94, 0.5);
}

/* LLM Method Cards */
.llm-method-card {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 18px;
    padding: 24px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    will-change: transform;
    transform-style: preserve-3d;
    backface-visibility: hidden;
}

.llm-method-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
        rgba(167, 139, 250, 0.03) 0%, 
        rgba(139, 92, 246, 0.03) 50%,
        rgba(124, 58, 237, 0.03) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.llm-method-card:hover {
    border-color: rgba(167, 139, 250, 0.4);
    box-shadow: 0 16px 48px rgba(167, 139, 250, 0.15);
}

.llm-method-card:hover::before {
    opacity: 1;
}

.llm-method-card.recommended {
    border-color: rgba(34, 197, 94, 0.3);
    box-shadow: 0 8px 32px rgba(34, 197, 94, 0.1);
}

.llm-method-card.recommended::before {
    background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.05) 0%, 
        rgba(16, 185, 129, 0.05) 100%);
}

.llm-method-card.recommended:hover {
    border-color: rgba(34, 197, 94, 0.5);
    box-shadow: 0 16px 48px rgba(34, 197, 94, 0.2);
}

.method-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
}

.method-icon {
    font-size: 2.2rem;
    filter: drop-shadow(0 0 15px rgba(167, 139, 250, 0.4));
}

.method-header h4 {
    color: #F3F4F6;
    font-size: 1.2rem;
    margin: 0 0 6px 0;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.method-badge {
    background: rgba(167, 139, 250, 0.2);
    color: #C4B5FD;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
    border: 1px solid rgba(167, 139, 250, 0.3);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.llm-method-card.recommended .method-badge {
    background: rgba(34, 197, 94, 0.2);
    color: #86EFAC;
    border-color: rgba(34, 197, 94, 0.3);
}

.method-features {
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
    z-index: 1;
}

.feature {
    color: #E5E7EB;
    font-size: 0.9rem;
    line-height: 1.4;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    transition: color 0.3s ease;
}

.feature:last-child {
    border-bottom: none;
}

.llm-method-card:hover .feature {
    color: #F3F4F6;
}

/* Responsive adjustments for method cards */
@media (max-width: 768px) {
    .llm-method-card {
        padding: 18px;
    }
    
    .method-header {
        gap: 12px;
    }
    
    .method-icon {
        font-size: 1.8rem;
    }
    
    .method-header h4 {
        font-size: 1.1rem;
    }
}

/* Modern Glassmorphism Toggle Switch */
.toggle-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 2.5rem;
}

.toggle-switch {
    position: relative;
    width: 320px;
    height: 60px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 30px;
    border: 1px solid rgba(255, 255, 255, 0.18);
    cursor: pointer;
    display: flex;
    align-items: center;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    overflow: hidden;
}

.toggle-switch::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.05) 0%, 
        rgba(236, 72, 153, 0.05) 100%);
    border-radius: 28px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-switch:hover {
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 
        0 12px 40px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.toggle-switch:hover::before {
    opacity: 1;
}

.toggle-slider {
    position: absolute;
    top: 4px;
    left: 4px;
    width: 156px;
    height: 52px;
    background: linear-gradient(135deg, 
        rgba(6, 182, 212, 0.9), 
        rgba(59, 130, 246, 0.9));
    border-radius: 26px;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 
        0 4px 20px rgba(6, 182, 212, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: 2;
}

.toggle-slider::before {
    content: '';
    position: absolute;
    top: 1px;
    left: 1px;
    right: 1px;
    bottom: 1px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.05) 100%);
    border-radius: 25px;
}

.toggle-option {
    position: relative;
    flex: 1;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    color: rgba(255, 255, 255, 0.6);
    border-radius: 30px;
}

.toggle-option:hover {
    background: rgba(255, 255, 255, 0.05);
}

.toggle-option.active {
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    background: rgba(255, 255, 255, 0.1);
}

.toggle-text {
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    text-align: center;
    line-height: 1;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

.toggle-option.active .toggle-text {
    /* Scale effect removed */
}

/* Active states */
.toggle-switch.git-active {
    background: rgba(30, 41, 59, 0.8);
    border-color: rgba(99, 102, 241, 0.3);
}

.toggle-switch.git-active .toggle-slider {
    transform: translateX(156px);
    background: linear-gradient(135deg, 
        rgba(99, 102, 241, 0.9), 
        rgba(79, 70, 229, 0.9));
    box-shadow: 
        0 4px 20px rgba(99, 102, 241, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.toggle-switch.git-active .toggle-slider::before {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.05) 100%);
}

/* Responsive design for toggle */
@media (max-width: 768px) {
    .toggle-switch {
        width: 280px;
        height: 52px;
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
    }
    
    .toggle-slider {
        width: 136px;
        height: 44px;
        top: 4px;
        left: 4px;
        border-radius: 22px;
    }
    
    .toggle-switch.git-active .toggle-slider {
                transform: translateX(136px);
                background: linear-gradient(135deg, 
                    rgba(99, 102, 241, 0.9), 
                    rgba(79, 70, 229, 0.9));
                box-shadow: 
                    0 4px 20px rgba(99, 102, 241, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }
    
    .toggle-text {
        font-size: 0.8rem;
        letter-spacing: 0.6px;
    }
    
    .toggle-container {
        margin-bottom: 1rem;
    }
}
</style>

<script>
let currentSection = 'cli';

function showSection(section) {
    const cliSection = document.getElementById('cliSection');
    const gitSection = document.getElementById('gitSection');
    const toggleSwitch = document.querySelector('.toggle-switch');
    const cliOption = document.querySelector('.toggle-option[data-section="cli"]');
    const gitOption = document.querySelector('.toggle-option[data-section="git"]');
    
    if (section === 'cli') {
        cliSection.style.display = 'block';
        gitSection.style.display = 'none';
        toggleSwitch.classList.remove('git-active');
        cliOption.classList.add('active');
        gitOption.classList.remove('active');
        currentSection = 'cli';
    } else {
        cliSection.style.display = 'none';
        gitSection.style.display = 'block';
        toggleSwitch.classList.add('git-active');
        gitOption.classList.add('active');
        cliOption.classList.remove('active');
        currentSection = 'git';
    }
}

function toggleSection() {
    if (currentSection === 'cli') {
        showSection('git');
    } else {
        showSection('cli');
    }
}

// Initialize with CLI section visible
document.addEventListener('DOMContentLoaded', function() {
    showSection('cli');
});
</script>
{% endblock %}